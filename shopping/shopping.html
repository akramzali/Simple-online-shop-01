<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุฑูุดฺฏุงู ุขููุงู</title>
</head>
<body>

    <h2>ูุณุช ูุญุตููุงุช</h2>

    <div class="product" data-id="1" data-name="ูุญุตูู ฑ" data-price="100">
        <p>ูุญุตูู ฑ - ููุช: 100 ุชููุงู</p>
        <button class="add-to-cart">ุงูุฒูุฏู ุจู ุณุจุฏ</button>
    </div>

    <div class="product" data-id="2" data-name="ูุญุตูู ฒ" data-price="200">
        <p>ูุญุตูู ฒ - ููุช: 200 ุชููุงู</p>
        <button class="add-to-cart">ุงูุฒูุฏู ุจู ุณุจุฏ</button>
    </div>

    <div class="product" data-id="3" data-name="ูุญุตูู ณ" data-price="300">
        <p>ูุญุตูู ณ - ููุช: 300 ุชููุงู</p>
        <button class="add-to-cart">ุงูุฒูุฏู ุจู ุณุจุฏ</button>
    </div>

    <br>
    <button id="cart-icon">๐ ุณุจุฏ ุฎุฑุฏ</button>

    <script>
        // ุจุฑุฑุณ ุงฺฏุฑ ุฏุฑ ููฺฉุงูโุงุณุชูุฑุฌ ฺุฒ ูุณุชุ ุขู ุฑุง ุฏุฑุงูุช ฺฉู
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        // ุงุถุงูู ฺฉุฑุฏู ูุญุตูู ุจู ุณุจุฏ ุฎุฑุฏ
        document.querySelectorAll(".add-to-cart").forEach(button => {
            button.addEventListener("click", (event) => {
                let product = event.target.closest(".product");
                let productId = product.dataset.id;
                let productName = product.dataset.name;
                let productPrice = product.dataset.price;

                // ุจุฑุฑุณ ุงฺฏุฑ ูุญุตูู ูุจูุงู ุงุถุงูู ุดุฏูุ ููุท ุชุนุฏุงุฏ ุฑุง ุงูุฒุงุด ุฏูุฏ
                let existingProduct = cart.find(item => item.id === productId);
                if (existingProduct) {
                    existingProduct.quantity++;
                } else {
                    cart.push({
                        id: productId,
                        name: productName,
                        price: productPrice,
                        quantity: 1
                    });
                }

                // ุฐุฎุฑู ุฏุฑ localStorage
                localStorage.setItem("cart", JSON.stringify(cart));

                alert(`${productName} ุจู ุณุจุฏ ุฎุฑุฏ ุงุถุงูู ุดุฏ!`);
            });
        });

        // ูุฏุงุช ุจู ุตูุญู ุฎุฑุฏ
        document.getElementById("cart-icon").addEventListener("click", () => {
            if (cart.length === 0) {
                alert("ุณุจุฏ ุฎุฑุฏ ุดูุง ุฎุงู ุงุณุช!");
            } else {
                window.location.href = "checkout.html";
            }
        });
    </script>

</body>
</html>
